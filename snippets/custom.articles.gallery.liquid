<div class='article-template__content page-width page-width--narrow rte'>
  <div class='article-template__image-gallery'>
    <ul class='cell  half_gutter vert-top'>
      {% for item in article.metafields.custom.gallery.value %}
        {% assign type = item.value.media_type %}
        {% case type %}
          {% when 'image' %}
            {{ item.value | image_url: width: 500 | image_tag }}
          {% when 'video' %}
            {{ item.value | video_tag: image_size: '500x', width: 500, autoplay: false, controls: true }}
          {% else %}
            {% assign file_url = item.value.url %}
            <Li class='cell__item  medium-up--one-half'>
              <a target='_blank' href='{{ file_url }}'>{{ item | media_tag: image_size: '200x' }}</a>
              <div>{{ file_url | split: '/' | last | split: '?v=' | first }}</div>
            </Li>
        {% endcase %}
      {% endfor %}
    </ul>
  </div>
</div>
