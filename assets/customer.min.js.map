{"version":3,"sources":["customer.js"],"names":["selectors","customerAddresses","addressCountrySelect","addressContainer","toggleAddressButton","cancelAddressButton","deleteAddressButton","attributes","expanded","confirmMessage","CustomerAddresses","constructor","this","elements","_getElements","Object","keys","length","_setupCountries","_setupEventListeners","container","document","querySelector","toggleButtons","querySelectorAll","cancelButtons","deleteButtons","countrySelects","Shopify","CountryProvinceSelector","hideElement","forEach","formId","select","dataset","element","addEventListener","_handleAddEditButtonClick","_handleCancelButtonClick","_handleDeleteButtonClick","_toggleExpanded","target","setAttribute","getAttribute","toString","currentTarget","closest","confirm","postLink","parameters","_method"],"mappings":"AAAA,MAAMA,UAAY,CAChBC,kBAAmB,4BACnBC,qBAAsB,gCACtBC,iBAAkB,iBAClBC,oBAAqB,wBACrBC,oBAAqB,uBACrBC,oBAAqB,8BACvB,EAEMC,WAAa,CACjBC,SAAU,gBACVC,eAAgB,sBAClB,QAEMC,kBACJC,cACEC,KAAKC,SAAWD,KAAKE,aAAa,EACQ,IAAtCC,OAAOC,KAAKJ,KAAKC,QAAQ,EAAEI,SAC/BL,KAAKM,gBAAgB,EACrBN,KAAKO,qBAAqB,EAC5B,CAEAL,eACE,IAAMM,EAAYC,SAASC,cAActB,UAAUC,iBAAiB,EACpE,OAAOmB,EAAY,CACjBA,UAAAA,EACAjB,iBAAkBiB,EAAUE,cAActB,UAAUG,gBAAgB,EACpEoB,cAAeF,SAASG,iBAAiBxB,UAAUI,mBAAmB,EACtEqB,cAAeL,EAAUI,iBAAiBxB,UAAUK,mBAAmB,EACvEqB,cAAeN,EAAUI,iBAAiBxB,UAAUM,mBAAmB,EACvEqB,eAAgBP,EAAUI,iBAAiBxB,UAAUE,oBAAoB,CAC3E,EAAI,EACN,CAEAgB,kBACMU,SAAWA,QAAQC,0BAErB,IAAID,QAAQC,wBAAwB,oBAAqB,qBAAsB,CAC7EC,YAAa,6BACf,CAAC,EACDlB,KAAKC,SAASc,eAAeI,QAAQ,IAC7BC,EAASC,EAAOC,QAAQF,OAE9B,IAAIJ,QAAQC,wBAAwB,kBAAkBG,EAAU,mBAAmBA,EAAU,CAC3FF,YAAa,4BAA4BE,CAC3C,CAAC,CACH,CAAC,EAEL,CAEAb,uBACEP,KAAKC,SAASU,cAAcQ,QAAQ,IAClCI,EAAQC,iBAAiB,QAASxB,KAAKyB,yBAAyB,CAClE,CAAC,EACDzB,KAAKC,SAASY,cAAcM,QAAQ,IAClCI,EAAQC,iBAAiB,QAASxB,KAAK0B,wBAAwB,CACjE,CAAC,EACD1B,KAAKC,SAASa,cAAcK,QAAQ,IAClCI,EAAQC,iBAAiB,QAASxB,KAAK2B,wBAAwB,CACjE,CAAC,CACH,CAEAC,gBAAgBC,GACdA,EAAOC,aACLnC,WAAWC,UACmC,UAA7CiC,EAAOE,aAAapC,WAAWC,QAAQ,GAAeoC,SAAS,CAClE,CACF,CAEAP,0BAA4B,CAAA,CAAGQ,cAAAA,CAAe,KAC5CjC,KAAK4B,gBAAgBK,CAAa,CACpC,EAEAP,yBAA2B,CAAA,CAAGO,cAAAA,CAAe,KAC3CjC,KAAK4B,gBACHK,EACGC,QAAQ9C,UAAUG,gBAAgB,EAClCmB,kBAAkBf,WAAWC,WAAW,CAC7C,CACF,EAEA+B,yBAA2B,CAAA,CAAGM,cAAAA,CAAe,KAEvCE,QAAQF,EAAcF,aAAapC,WAAWE,cAAc,CAAC,GAC/DmB,QAAQoB,SAASH,EAAcX,QAAQO,OAAQ,CAC7CQ,WAAY,CAAEC,QAAS,QAAS,CAClC,CAAC,CAEL,CACF","file":"customer.min.js","sourcesContent":["const selectors = {\n  customerAddresses: '[data-customer-addresses]',\n  addressCountrySelect: '[data-address-country-select]',\n  addressContainer: '[data-address]',\n  toggleAddressButton: 'button[aria-expanded]',\n  cancelAddressButton: 'button[type=\"reset\"]',\n  deleteAddressButton: 'button[data-confirm-message]'\n};\n\nconst attributes = {\n  expanded: 'aria-expanded',\n  confirmMessage: 'data-confirm-message'\n};\n\nclass CustomerAddresses {\n  constructor() {\n    this.elements = this._getElements();\n    if (Object.keys(this.elements).length === 0) return;\n    this._setupCountries();\n    this._setupEventListeners();\n  }\n\n  _getElements() {\n    const container = document.querySelector(selectors.customerAddresses);\n    return container ? {\n      container,\n      addressContainer: container.querySelector(selectors.addressContainer),\n      toggleButtons: document.querySelectorAll(selectors.toggleAddressButton),\n      cancelButtons: container.querySelectorAll(selectors.cancelAddressButton),\n      deleteButtons: container.querySelectorAll(selectors.deleteAddressButton),\n      countrySelects: container.querySelectorAll(selectors.addressCountrySelect)\n    } : {};\n  }\n\n  _setupCountries() {\n    if (Shopify && Shopify.CountryProvinceSelector) {\n      // eslint-disable-next-line no-new\n      new Shopify.CountryProvinceSelector('AddressCountryNew', 'AddressProvinceNew', {\n        hideElement: 'AddressProvinceContainerNew'\n      });\n      this.elements.countrySelects.forEach((select) => {\n        const formId = select.dataset.formId;\n        // eslint-disable-next-line no-new\n        new Shopify.CountryProvinceSelector(`AddressCountry_${formId}`, `AddressProvince_${formId}`, {\n          hideElement: `AddressProvinceContainer_${formId}`\n        });\n      });\n    }\n  }\n\n  _setupEventListeners() {\n    this.elements.toggleButtons.forEach((element) => {\n      element.addEventListener('click', this._handleAddEditButtonClick);\n    });\n    this.elements.cancelButtons.forEach((element) => {\n      element.addEventListener('click', this._handleCancelButtonClick);\n    });\n    this.elements.deleteButtons.forEach((element) => {\n      element.addEventListener('click', this._handleDeleteButtonClick);\n    });\n  }\n\n  _toggleExpanded(target) {\n    target.setAttribute(\n      attributes.expanded,\n      (target.getAttribute(attributes.expanded) === 'false').toString()\n    );\n  }\n\n  _handleAddEditButtonClick = ({ currentTarget }) => {\n    this._toggleExpanded(currentTarget);\n  }\n\n  _handleCancelButtonClick = ({ currentTarget }) => {\n    this._toggleExpanded(\n      currentTarget\n        .closest(selectors.addressContainer)\n        .querySelector(`[${attributes.expanded}]`)\n    )\n  }\n\n  _handleDeleteButtonClick = ({ currentTarget }) => {\n    // eslint-disable-next-line no-alert\n    if (confirm(currentTarget.getAttribute(attributes.confirmMessage))) {\n      Shopify.postLink(currentTarget.dataset.target, {\n        parameters: { _method: 'delete' },\n      });\n    }\n  }\n}\n"]}